---
outline: deep
---

# 数组

## 数组的访问和遍历

### 数组的访问

访问数组中的元素，我们直接在中括号中指定其索引即可

```ts
arr[0]; // 访问索引下标为0的元素
```

### 数组的遍历

- **for 循环**

  最基础的操作，通过循环数组的下标，来依次访问每个值：

```ts
// 获取数组的长度
const len = arr.length;
for (let i = 0; i < len; i++) {
	// 输出数组的元素值，输出当前索引
	console.log(arr[i], i);
}
```

- **forEach 方法**

  通过取 forEach 方法中传入函数的第一个入参和第二个入参，我们也可以取到数组每个元素的值及其对应索引：

```ts
// 获取数组的长度
arr.forEach((item, index) => {
	// 输出数组的元素值，输出当前索引
	console.log(item, index);
});
```

- **map 方法**

  map 方法在调用形式上与 forEach 无异，区别在于 map 方法会根据你传入的函数逻辑对数组中每个元素进行处理、进而返回一个全新的数组。
  所以其实 map 做的事情不仅仅是遍历，而是在遍历的基础上“再加工”。当我们需要对数组内容做批量修改、同时修改的逻辑又高度一致时，就可以调用 map 来达到我们的目的：

```ts
const newArr = arr.map((item, index) => {
	// 输出数组的元素值，输出当前索引
	console.log(item, index);
	// 在当前元素值的基础上加1
	return item + 1;
});
```

**建议**：如果没有特殊的处理，统一使用 for 循环来实现遍历。**从性能上看，for 循环遍历起来是最快的。**

## 二维数组

二维数组其实就是数组套数组，也就是每个元素都是数组的数组。

```ts
const arr = [
	[1, 2, 3, 4, 5],
	[1, 2, 3, 4, 5],
	[1, 2, 3, 4, 5],
	[1, 2, 3, 4, 5],
	[1, 2, 3, 4, 5]
];
```

![An image](/array/2D.png)

**索引的规律：** 图中的每一行，就代表着一个数组元素。比如第 0 行，就代表着数组中 arr[0] 这个数组元素，其内容是 [1,2,3,4,5]。
每一行中的每一列，则代表一个确切的“坑”。比如第 0 行第 1 列，就代表着数组中 arr[0][1] 这个元素，其值为 2，是一个确切的 number。

明白了二维数组的索引规律，二维数组的特点：从形状上看，相对于一维数组一条“线”一般的布局，二维数组更像是一个“面”。拿上面的例子来说，这里的二维数组逻辑分布图就宛如一个正方形。如果稍微延长一下其中的一边，它也可以是一个矩形。

**二维数组的别名就叫“矩阵”。**

## 二维数组的初始化

### fill 的局限性

错误的初始化二维数据方法：

```ts
const arr = new Array(7).fill([]);
```

**fill 的工作机制**： 当给 fill 传递一个入参时，**如果这个入参的类型是引用类型，那么 fill 在填充坑位时填充的其实就是入参的引用**。

这 7 个数组对应了**同一个引用**、指向的是**同一块内存空间**，**它们本质上是同一个数组**。因此当修改第 0 行第 0 个元素的值时，第 1-6 行的第 0 个元素的值也都会跟着发生改变。

### 初始化一个二维数组

```ts
const arr = new Array(7);
const len = arr.length;
for (let i = 0; i < len; i++) {
	// 将数组的每一个坑位初始化为数组
	arr[i] = [];
}
```

for 循环中，每一次迭代通过“[]”创建一个新的数组，这样就不会有引用指向的问题。

### 二维数组的访问

```ts
// 缓存外部数组的长度
const outerLen = arr.length;
for (let i = 0; i < outerLen; i++) {
	// 缓存内部数组的长度
	const innerLen = arr[i].length;
	for (let j = 0; j < innerLen; j++) {
		// 输出数组的值，输出数组的索引
		console.log(arr[i][j], i, j);
	}
}
```

一维数组用 for 循环遍历只需一层循环，二维数组是两层，三维数组就是三层。依次类推，**N 维数组需要 N 层循环来完成遍历**。
